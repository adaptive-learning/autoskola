<div id="container">
  <div ng-hide="placesTypes || error" class="loading-indicator">
  </div>
  <div ng-show="error" ng-bind="error" class="alert alert-danger">
  </div>
  <ul ng-show="placesTypes.length && (filteredTypes = (placesTypes|isTypeCategory:typeCat)).length" 
      class="thumbnails fade-show-hide"
      ng-repeat="typeCat in typeCategories">
    <div ng-click="updateCat(typeCat)"
        class="collapse-control"
        ng-show="filteredTypes.length > 0 && placesTypes.length > 1">
      <h2>
        <i class="glyphicon {{typeCat.hidden && 'glyphicon-plus-sign' || 'glyphicon-minus-sign'}}"></i>
        {{typeCat.name}}
      </h2>
      <a href="#/practice/{{part}}/{{typeCat.slug}}" 
         class="btn btn-primary pull-right" 
         ng-hide="typeCat.hidden || filteredTypes.length == 1" >
        <i class="glyphicon glyphicon-check"></i> Procvičovat
      </a>
      <div class="clearfix"></div>
    </div>
    <div ng-hide="typeCat.hidden">
      <li 
          ng-repeat="type in filteredTypes"
          ng-class="{'collapsed': type.hidden}">
        <div data-toggle="collapse" 
            class="collapse-control collapse-control-inner"
            data-target="#collapse-{{type.slug}}"
            ng-click="updateMap(type)">
          <h3>
            <i class="glyphicon {{type.hidden && 'glyphicon-plus-sign' || 'glyphicon-minus-sign'}}"></i>
            {{type.name}}
          </h3>
          <a href="#/practice/{{part}}/{{type.slug}}" 
             class="btn btn-primary pull-right"  >
            <i class="glyphicon glyphicon-check"></i> Procvičovat
          </a>
          <div class="clearfix"></div>
        </div>
        <div class="map-progress" count="{{type.places.length}}"  
             skills="{{ {
               practiced:(type.places|filter:{practiced:true}).length,
               learned:(type.places|filter:{learned:true}).length
             } }}"></div>
        <div class="view-places collapse in question-buttons" id="collapse-{{type.slug}}">
          <div ng-hide="(type.places|filter:{displayed:true}).length" class="alert alert-info">
            Zde zatím nebylo nic procvičováno.
          </div>
          <button ng-repeat="question in type.places|filter:{displayed:true}"
                style="background-color: {{question.probability|probColor}};"
                place-label>
          </button>
          <div class="clearfix"></div>
        </div>
      </li>
    </div>
  </ul>
  <div class="clearfix"></div>
</div>
